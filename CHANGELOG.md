# LogiRoute - Changelog

## v2.0 (2026-02-27) โ ะััะณะฐะปัะตััะบะธะน ะผะพะดัะปั + Compliance

### ๐ ะขะธะฟั ะดะพะบัะผะตะฝัะพะฒ โ ะฟะพะปะฝะฐั ัะตะฐะปะธะทะฐัะธั

- **ืืฉืืืืืช ืืก** (ะฝะฐะปะพะณะพะฒัะน ะธะฝะฒะพะนั) โ ะพัะฝะพะฒะฝะพะน ะดะพะบัะผะตะฝั, ัะพะทะดะฐัััั ะธะท ัะพัะบะธ ะดะพััะฐะฒะบะธ
- **ืชืขืืืช ืืฉืืื** (ะฝะฐะบะปะฐะดะฝะฐั) โ ะฑะตะท ัะตะฝ, ัะพะปัะบะพ ัะพะฒะฐั/ะบะพะปะธัะตััะฒะพ/ะบะปะธะตะฝั/ะฒะพะดะธัะตะปั/ะดะฐัะฐ/ะฟะพะดะฟะธัั
- **ืืฉืืืืืช ืืก / ืงืืื** (ะธะฝะฒะพะนั-ะบะฒะธัะฐะฝัะธั) โ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะณะฐะปะพัะบะต "ืชืฉืืื ืืชืงืื" ะฒ ะดะธะฐะปะพะณะต ัะพะทะดะฐะฝะธั ืืฉืืืืืช. ะะบะปััะฐะตั ัะฟะพัะพะฑ ะพะฟะปะฐัั (ืืืืื / ืืจืืืก ืืฉืจืื / ืืขืืจื ืืืงืืืช / ืฆ'ืง)
- **ืงืืื** (ะบะฒะธัะฐะฝัะธั) โ ะพัะดะตะปัะฝะฐั ะบะฝะพะฟะบะฐ ะฝะฐ ัะบัะฐะฝะต ืืืืื ืืฉืืืืืืช, ะฟัะธะฒัะทัะฒะฐะตััั ะบ ัััะตััะฒัััะตะน ืืฉืืืืืช ัะตัะตะท `linkedInvoiceId`. ะะธะฐะปะพะณ ะฒัะฑะพัะฐ ัะฟะพัะพะฑะฐ ะพะฟะปะฐัั, ะฐะฒัะพะฟะตัะฐัั
- **ืืฉืืืืืช ืืืืื** (credit note) โ ัะพะทะดะฐัััั ะธะท ัะบัะฐะฝะฐ ืืืืื ืืฉืืืืืืช

### ๐งพ PDF-ะดะพะบัะผะตะฝัั

- ะฅะตะดะตั: ะดะฐะฝะฝัะต ะบะพะผะฟะฐะฝะธะธ ะฝะฐ ะธะฒัะธัะต + ะฐะฝะณะปะธะนัะบะพะผ, ื.ืค, ะบะพะฝัะฐะบัั. ะะตััะพ ะดะปั ะปะพะณะพัะธะฟะฐ ะบะพะผะฟะฐะฝะธะธ-ะบะปะธะตะฝัะฐ (TODO)
- ะะฐะณะพะปะพะฒะพะบ: ัะธะฟ ะดะพะบัะผะตะฝัะฐ + ะฝะพะผะตั, ะดะฐัะฐ, ะฒัะตะผั, ัะธะฟ ะบะพะฟะธะธ (ืืงืืจ/ืขืืชืง/ืืืื ืืืงืืจ), ะผะตัะบะฐ ืืืคืกื ืืืืจืช
- ะะปะพะบ ะบะปะธะตะฝัะฐ: ะธะผั, ะฐะดัะตั, ะณะพัะพะด, ะฝะพะผะตั ะบะปะธะตะฝัะฐ
- ะขะฐะฑะปะธัะฐ ะฟะพะทะธัะธะน: ืืง"ื, ะพะฟะธัะฐะฝะธะต, ะบะพะปะธัะตััะฒะพ, ัะตะฝะฐ, ัะบะธะดะบะฐ, ะธัะพะณะพ (ะดะปั ืืฉืืืืืช); ัะพะปัะบะพ ืืง"ื/ะพะฟะธัะฐะฝะธะต/ะบะพะปะธัะตััะฒะพ (ะดะปั ืชืขืืืช ืืฉืืื)
- ะัะพะณะธ: ืกืืดื, ืืืื, ืกืืดื ืืคืื ืืขืดื, ืืขืดื 18%, ืกืืดื ืืชืฉืืื
- ะกะฟะพัะพะฑ ะพะฟะปะฐัั (ืืืคื ืชืฉืืื) โ ะพัะพะฑัะฐะถะฐะตััั ะดะปั ืืฉืืืืืช ืืก/ืงืืื ะธ ืงืืื
- ะกััะปะบะฐ ะฝะฐ ะพัะธะณะธะฝะฐะปัะฝัั ืืฉืืืืืช โ ะพัะพะฑัะฐะถะฐะตััั ะดะปั ืงืืื
- ะคััะตั: ะฟะพะดะฟะธัั, ััะปะพะฒะธั ะพะฟะปะฐัั, ะฒะพะดะธัะตะปั/ะผะฐัะธะฝะฐ/ะฒัะตะผั ะฒัะตะทะดะฐ, ะผะตัะฐ-ะดะฐะฝะฝัะต (ID, ะดะฐัะฐ ืืคืงื)
- ะจัะธััั: NotoSansHebrew (Regular + Bold) + Arial, ะบะตัะธัััััั
- ะะฐะทะผะตัั ััะธััะพะฒ ัะฒะตะปะธัะตะฝั ะฝะฐ +2 ะพั ะฑะฐะทะพะฒัั

### ๐ Compliance (Israeli Tax Law)

- ะะพัะปะตะดะพะฒะฐัะตะปัะฝะฐั ะฝัะผะตัะฐัะธั ัะตัะตะท Firestore transaction (ะฑะตะท ะฟัะพะฟััะบะพะฒ/ะฟะพะฒัะพัะพะฒ)
- Immutable snapshot hash (SHA-256) ะฟัะธ ัะธะฝะฐะปะธะทะฐัะธะธ
- Audit log (append-only) โ ะบะฐะถะดะพะต ะดะตะนััะฒะธะต ะปะพะณะธััะตััั
- Print events โ ะพัะดะตะปัะฝะฐั ะบะพะปะปะตะบัะธั, append-only
- Integrity chain โ append-only
- ะกัะฐัััั: active / cancelled / draft (ัะดะฐะปะตะฝะธะต ะทะฐะฟัะตัะตะฝะพ)
- ืืกืคืจ ืืงืฆืื (assignment number) โ ะฟะพัะพะณะธ ะฟะพ ะดะฐัะฐะผ (2025: 20K, 2026.01: 10K, 2026.06: 5K), ะฑะปะพะบะธัะพะฒะบะฐ ะฟะตัะฐัะธ ืืงืืจ ะฑะตะท ะพะดะพะฑัะตะฝะธั
- ะะฐัะธัะฐ ะพั ะดัะฑะปะตะน: `deliveryPointId` + `documentType` + active status
- ะะฐัะธัะฐ ะพั ะดะฒะพะนะฝะพะณะพ ะบะปะธะบะฐ: `_isCreating` guard + disabled button + spinner

### ๐ค ะะพะดะตะปั ะบะปะธะตะฝัะฐ

- ะะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต `vatId` (ื.ืค / ืข.ื) โ ะพะฟัะธะพะฝะฐะปัะฝะพะต, ััะฐะฝะตั ะพะฑัะทะฐัะตะปัะฝัะผ ะฟัะธ ะฒััะพะดะต ะฝะฐ ััะฝะพะบ
- ะะพะปะต ะฒะฒะพะดะฐ ะฒ EditClientDialog ั ะฟะพะดัะบะฐะทะบะพะน "ืื ืืืื ืืจืืข"

### ๐ฅ๏ธ UI

- ะะพะณะพัะธะฟ LogiRoute ะฝะฐ ัะบัะฐะฝะต ะปะพะณะธะฝะฐ (ะฒะฝัััะธ ะฑะตะปะพะน ะบะฐััะพัะบะธ, RichText "LOGIROUTE")
- ะฃะฑัะฐะฝะฐ ะฝะฐะดะฟะธัั "ืืขืจืืช ืืืืื ืืืืืกืืืงื" ั ัะบัะฐะฝะฐ ะปะพะณะธะฝะฐ
- ะะฝะพะฟะบะฐ ืชืขืืืช ืืฉืืื (ัะธะฝัั, local_shipping) ะฝะฐ ัะพัะบะต ะดะพััะฐะฒะบะธ
- ะะฝะพะฟะบะฐ ืงืืื (teal, payments) ะฝะฐ ัะบัะฐะฝะต ืืืืื ืืฉืืืืืืช โ ะดะปั ืืฉืืืืืช ืืก ะธ ืืฉืืืืืช ืืก/ืงืืื
- Badge ัะธะฟะฐ ะดะพะบัะผะตะฝัะฐ ะฒ ัะฟะธัะบะต: ืืฉืืืืืช ืืก/ืงืืื, ืงืืื, ืช. ืืฉืืื, ืืืืื
- ะงะตะบะฑะพะบั "ืชืฉืืื ืืชืงืื" + dropdown ัะฟะพัะพะฑะฐ ะพะฟะปะฐัั ะฒ ะดะธะฐะปะพะณะต ัะพะทะดะฐะฝะธั ืืฉืืืืืช

### โก ะะฟัะธะผะธะทะฐัะธั

- ะะตัะธัะพะฒะฐะฝะธะต ััะธััะพะฒ (ะณััะทัััั ะพะดะธะฝ ัะฐะท ะทะฐ ัะตััะธั)
- ะะฐัะฐะปะปะตะปัะฝะฐั ะทะฐะณััะทะบะฐ Firestore ะดะฐะฝะฝัั ะฟัะธ ัะพะทะดะฐะฝะธะธ ะธะฝะฒะพะนัะฐ
- ะฃะผะตะฝััะตะฝ timeout ะดะปั API assignment
- ะะฐัะฐะปะปะตะปัะฝัะต audit log + print event ะทะฐะฟะธัะธ

### ๐ฆ ะคะฐะนะปั ะธะทะผะตะฝะตะฝั

```
lib/models/invoice.dart                          โ enum InvoiceDocumentType + paymentMethod field
lib/models/client_model.dart                     โ vatId field
lib/screens/auth/login_screen.dart               โ ะปะพะณะพัะธะฟ, ัะฑัะฐะฝะฐ ะฟะพะดะฟะธัั
lib/screens/dispatcher/create_invoice_dialog.dart โ ะฒัะต ัะธะฟั ะดะพะบัะผะตะฝัะพะฒ, ัะตะบะฑะพะบั ะพะฟะปะฐัั
lib/screens/dispatcher/dispatcher_dashboard.dart  โ ะบะฝะพะฟะบะฐ ืชืขืืืช ืืฉืืื
lib/screens/dispatcher/widgets/active_routes_tab.dart โ callback ืชืขืืืช ืืฉืืื
lib/screens/dispatcher/invoice_management_screen.dart โ ะบะฝะพะฟะบะฐ ืงืืื, ะดะธะฐะปะพะณ ะพะฟะปะฐัั, badge ัะธะฟะพะฒ
lib/screens/shared/dialogs/edit_client_dialog.dart โ ะฟะพะปะต ื.ืค
lib/services/invoice_print_service.dart          โ ะฒัะต ัะธะฟั PDF, ัะฟะพัะพะฑ ะพะฟะปะฐัั, linkedInvoice
lib/services/invoice_service.dart                โ duplicate check ะฟะพ deliveryPointId
lib/services/invoice_assignment_service.dart     โ taxInvoiceReceipt support
docs/ENGINEERING_METHODS.md                      โ compliance contract
docs/ISRAELI_INVOICE_COMPLIANCE.md               โ ัะฟัะฐะฒะพัะฝะธะบ ััะตะฑะพะฒะฐะฝะธะน
pubspec.yaml                                     โ assets (logo, company_logo)
```

---

## v1.0-stable (2025-02-08) - ะญะขะะะะะะะฏ ะะะะกะะฏ

### ๐ฏ ะัะฝะพะฒะฝัะต ะฒะพะทะผะพะถะฝะพััะธ
- โ ะะพะปะฝะฐั ัะธััะตะผะฐ ัะฟัะฐะฒะปะตะฝะธั ะดะพััะฐะฒะบะฐะผะธ
- โ ะะพะปะธ: ะกัะฟะตัะฐะดะผะธะฝ, ะะดะผะธะฝ, ะะธัะฟะตััะตั, ะะพะดะธัะตะปั
- โ ะัะปััะธัะทััะฝะพััั: ะัััะบะธะน, ะะฒัะธั, English
- โ ะะฐััะฐ ั ะผะฐัััััะฐะผะธ ะธ ะพััะปะตะถะธะฒะฐะฝะธะตะผ ะฒะพะดะธัะตะปะตะน
- โ ะะฒัะพะผะฐัะธัะตัะบะฐั ะพะฟัะธะผะธะทะฐัะธั ะผะฐัััััะพะฒ
- โ GPS-ััะตะบะธะฝะณ ะฒะพะดะธัะตะปะตะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ

### ๐ ะะพะฒะพะต ะฒ ััะพะน ะฒะตััะธะธ

#### ะะพะผะตั ะผะฐัะธะฝั ะดะปั ะฒะพะดะธัะตะปะตะน
- ะะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต `vehicleNumber` ะดะปั ะฒะพะดะธัะตะปะตะน
- ะัะพะฑัะฐะถะฐะตััั ะฒ ัะฟะธัะบะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะธะบะพะฝะบะพะน ๐
- ะะตะดะฐะบัะธััะตััั ะฒ ะดะธะฐะปะพะณะต ัะพะทะดะฐะฝะธั/ัะตะดะฐะบัะธัะพะฒะฐะฝะธั

#### ะฃะปัััะตะฝะฝัะต ะฟัะฐะฒะฐ ะดะพัััะฟะฐ
- **ะะฑััะฝัะน ะฐะดะผะธะฝ**: ะฒะธะดะธั ัะพะปัะบะพ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ัะฒะพะตะน ะบะพะผะฟะฐะฝะธะธ
- **ะกัะฟะตัะฐะดะผะธะฝ**: ะฒะธะดะธั ะฒัะต ะบะพะผะฟะฐะฝะธะธ ั ัะธะปัััะพะผ
- ะะฑััะฝัะน ะฐะดะผะธะฝ ะฝะต ะผะพะถะตั ะผะตะฝััั `companyId` (ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัะปะตะดัะตััั)
- ะกัะฟะตัะฐะดะผะธะฝ ะผะพะถะตั ะฝะฐะทะฝะฐัะฐัั ะปัะฑัั ะบะพะผะฟะฐะฝะธั

#### ะะพะบะฐะปะธะทะฐัะธั
- ะะฐัะบะตั ัะบะปะฐะดะฐ ัะตะฟะตัั ะปะพะบะฐะปะธะทะพะฒะฐะฝ ะฝะฐ ะฒัะตั ัะทัะบะฐั
- ะะพะฑะฐะฒะปะตะฝั ะบะปััะธ: `warehouseStartPoint`, `vehicleNumber`

#### ะัะฟัะฐะฒะปะตะฝะธั ะบะฐััั
- ะัะฟัะฐะฒะปะตะฝะพ ะธััะตะทะฝะพะฒะตะฝะธะต ะผะฐัััััะพะฒ (race condition)
- ะะพะฑะฐะฒะปะตะฝะพ ะบะตัะธัะพะฒะฐะฝะธะต ัะธะณะฝะฐััั ะผะฐัััััะพะฒ
- ะะฐะทะฝัะต ัะฒะตัะฐ ะดะปั ะผะฐัััััะพะฒ ัะฐะทะฝัั ะฒะพะดะธัะตะปะตะน
- ะัะพะนะดะตะฝะฝัะต ััะฐััะบะธ ะฟะพะบะฐะทัะฒะฐัััั ัะตััะผ
- ะะบัะธะฒะฝัะต ััะฐััะบะธ ะฟะพะบะฐะทัะฒะฐัััั ัะฒะตัะพะผ ะฒะพะดะธัะตะปั

### ๐ฆ ะะฐะทะฒะตัััะฒะฐะฝะธะต
- **APK**: 33.1 MB
- **Web**: https://logiroute-app.web.app
- **APK Download**: https://logiroute-app.web.app/downloads/logiroute.apk

### ๐ง ะขะตัะฝะธัะตัะบะธะต ะดะตัะฐะปะธ

#### ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั
```
lib/models/user_model.dart
lib/services/auth_service.dart
lib/screens/admin/admin_dashboard.dart
lib/widgets/delivery_map_widget.dart
lib/l10n/app_en.arb
lib/l10n/app_ru.arb
lib/l10n/app_he.arb
```

#### ะะฐะทะฐ ะดะฐะฝะฝัั
- ะะพะฑะฐะฒะปะตะฝะพ ะฟะพะปะต `vehicleNumber` ะฒ ะบะพะปะปะตะบัะธั `users`
- ะกะพะฒะผะตััะธะผะพ ั ัััะตััะฒัััะธะผะธ ะดะฐะฝะฝัะผะธ (ะฟะพะปะต ะพะฟัะธะพะฝะฐะปัะฝะพะต)

### ๐ ะะฐะบ ะฒะตัะฝััััั ะบ ััะพะน ะฒะตััะธะธ
```bash
git checkout v1.0-stable
```

### ๐ ะกะปะตะดัััะธะต ัะฐะณะธ
- ะขะตััะธัะพะฒะฐะฝะธะต ะฒ ะฟัะพะดะฐะบัะตะฝะต
- ะกะฑะพั ะพะฑัะฐัะฝะพะน ัะฒัะทะธ ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
- ะะปะฐะฝะธัะพะฒะฐะฝะธะต ัะปะตะดัััะธั ััะฝะบัะธะน

---

## ะัะตะดัะดััะธะต ะฒะตััะธะธ

### v0.9 (2025-02-07)
- ะะฐะทะพะฒะฐั ััะฝะบัะธะพะฝะฐะปัะฝะพััั ะดะพััะฐะฒะพะบ
- ะกะธััะตะผะฐ ัะพะปะตะน
- ะะฐััะฐ ั ะผะฐัััััะฐะผะธ
- ะัะปััะธัะทััะฝะพััั

### v0.8 (2025-02-06)
- ะะตัะฒะฐั ัะฐะฑะพัะฐั ะฒะตััะธั
- ะะฒัะพัะธะทะฐัะธั
- ะกะพะทะดะฐะฝะธะต ัะพัะตะบ ะดะพััะฐะฒะบะธ
