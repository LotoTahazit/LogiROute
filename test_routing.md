# –¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Waypoints –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å
**–ë—ã–ª–æ:** –ü—Ä–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–æ—á–µ–∫ ‚â§3, `SmartNavigationService` –≤—ã–∑—ã–≤–∞–ª `getRoute()` –∫–æ—Ç–æ—Ä—ã–π —Å—Ç—Ä–æ–∏–ª –º–∞—Ä—à—Ä—É—Ç —Ç–æ–ª—å–∫–æ –æ—Ç start –¥–æ end, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –≤—Å–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–æ—á–∫–∏.

**–°—Ç–∞–ª–æ:** –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞:
- 0 waypoints ‚Üí `getRoute()` (–ø—Ä–æ—Å—Ç–æ–π –º–∞—Ä—à—Ä—É—Ç A‚ÜíB)
- 1-3 waypoints ‚Üí `getOptimizedRoute()` (–º–∞—Ä—à—Ä—É—Ç —á–µ—Ä–µ–∑ —Ç–æ—á–∫–∏ –ë–ï–ó –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ—Ä—è–¥–∫–∞)
- 4+ waypoints ‚Üí `getOptimizedTrip()` (–º–∞—Ä—à—Ä—É—Ç —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –ø–æ—Ä—è–¥–∫–∞)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ú–∞—Ä—à—Ä—É—Ç—ã –Ω–µ –Ω–∞—á–∏–Ω–∞–ª–∏—Å—å —Å–æ —Å–∫–ª–∞–¥–∞
**–ë—ã–ª–æ:** –ú–∞—Ä—à—Ä—É—Ç –Ω–∞—á–∏–Ω–∞–ª—Å—è —Å –ø–µ—Ä–≤–æ–π —Ç–æ—á–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏

**–°—Ç–∞–ª–æ:** –í—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å–æ —Å–∫–ª–∞–¥–∞ (32.48698, 34.982121)

## –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
flutter run -d chrome
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)

3. –°–æ–∑–¥–∞–π—Ç–µ –º–∞—Ä—à—Ä—É—Ç —Å 2-3 —Ç–æ—á–∫–∞–º–∏

4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
```
üè≠ [Map] Building route for driver XXX starting from warehouse (32.48698, 34.982121)
üìç [Map] Route has 2 delivery points
üß† [SmartNavigation] Getting multi-point route with 1 waypoints
  üìç Waypoint 0: Client1 (lat, lng)
üß≠ [OSRM] Requesting route with 1 waypoints
‚úÖ [OSRM] Route with waypoints found: X.Xkm, X.Xmin
‚úÖ [SmartNavigation] OSRM route OK (route-with-waypoints): X.X–∫–º, X.X–º
üîç [Map] Raw polyline length: XXXX chars
üìç [PolylineDecoder] Point 1: lat=32.xxx, lng=34.xxx
‚úÖ [PolylineDecoder] Decoded XXX valid points
‚úÖ [PolylineDecoder] All XXX points are valid
```

5. –ù–∞ –∫–∞—Ä—Ç–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
- ‚úÖ –ó–µ–ª–µ–Ω—ã–π –º–∞—Ä–∫–µ—Ä —Å–∫–ª–∞–¥–∞
- ‚úÖ –°–∏–Ω–∏–µ –º–∞—Ä–∫–µ—Ä—ã —Ç–æ—á–µ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏
- ‚úÖ –ó–µ–ª–µ–Ω–∞—è –ª–∏–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞, —Å–ª–µ–¥—É—é—â–∞—è –¥–æ—Ä–æ–≥–∞–º (–ù–ï –ø—Ä—è–º–∞—è!)

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

–ú–∞—Ä—à—Ä—É—Ç –¥–æ–ª–∂–µ–Ω:
1. –ù–∞—á–∏–Ω–∞—Ç—å—Å—è —Å–æ —Å–∫–ª–∞–¥–∞ (–∑–µ–ª–µ–Ω—ã–π –º–∞—Ä–∫–µ—Ä)
2. –ü—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –í–°–ï —Ç–æ—á–∫–∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É
3. –°–ª–µ–¥–æ–≤–∞—Ç—å –¥–æ—Ä–æ–≥–∞–º (–Ω–µ –ø—Ä—è–º—ã–º–∏ –ª–∏–Ω–∏—è–º–∏)
4. –ó–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Ç–æ—á–∫–µ –¥–æ—Å—Ç–∞–≤–∫–∏

## –ï—Å–ª–∏ –º–∞—Ä—à—Ä—É—Ç –≤—Å–µ –µ—â–µ –ø—Ä—è–º–æ–π:

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ:
- `‚ùå [OSRM] API Error` - –ø—Ä–æ–±–ª–µ–º–∞ —Å OSRM API
- `‚ö†Ô∏è [Map] Sanitized polyline invalid` - –ø—Ä–æ–±–ª–µ–º–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
- `‚ö†Ô∏è [Map] No route from SmartNavigationService` - OSRM –Ω–µ –≤–µ—Ä–Ω—É–ª –º–∞—Ä—à—Ä—É—Ç
- `üó∫Ô∏è [Map] Created fallback polyline` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback (–ø—Ä—è–º—ã–µ –ª–∏–Ω–∏–∏)
